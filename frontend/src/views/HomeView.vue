<template>
  <div>
    <!-- Hero Section -->
    <section class="relative w-full py-12 sm:py-16 lg:py-20 text-white overflow-hidden min-h-[80vh] flex items-center" style="background-color: #3B3157;">
      
      <!-- Matrix Rain Animation - Full width hero background -->
      <canvas ref="matrixCanvas" 
              class="absolute top-0 left-0 w-full h-full z-0" 
              style="pointer-events: none;">
      </canvas>
      
      <!-- Light overlay for better text readability (over Matrix) -->
      <div class="absolute inset-0 bg-black opacity-20 z-10"></div>
      
      <!-- Content - highest z-index -->
      <div class="relative container-responsive z-20 w-full">
        <div class="text-center">
          <h1 class="text-4xl sm:text-5xl lg:text-6xl font-bold leading-tight mb-6 drop-shadow-lg">
            Ovl√°dnite rast
            <span class="text-red-500 block">YouTube kan√°la</span>
          </h1>
          <p class="text-xl lg:text-2xl text-gray-100 mb-8 max-w-3xl mx-auto drop-shadow-md">
            Uƒçte sa od √∫spe≈°n√Ωch YouTube tvorcov a preme≈àte svoj kan√°l na 
            prosperuj√∫ci biznis.
          </p>
          
          <!-- Stats Section in Hero -->
          <div class="grid grid-cols-3 gap-4 max-w-2xl mx-auto mb-8 text-center">
            <div class="bg-black bg-opacity-20 backdrop-blur-sm rounded-lg p-4">
              <div class="text-2xl font-bold text-white drop-shadow-md">1000+</div>
              <div class="text-sm text-gray-200">spokojn√Ωch ≈°tudentov</div>
            </div>
            <div class="bg-black bg-opacity-20 backdrop-blur-sm rounded-lg p-4">
              <div class="text-2xl font-bold text-white drop-shadow-md">50+</div>
              <div class="text-sm text-gray-200">hod√≠n obsahu</div>
            </div>
            <div class="bg-black bg-opacity-20 backdrop-blur-sm rounded-lg p-4">
              <div class="text-2xl font-bold text-white drop-shadow-md">4.8‚≠ê</div>
              <div class="text-sm text-gray-200">priemern√© hodnotenie</div>
            </div>
          </div>
          
          <div class="flex flex-col sm:flex-row gap-4 justify-center">
            <router-link to="/courses" class="bg-red-500 hover:bg-red-600 text-white font-medium py-4 px-8 rounded-lg transition-colors text-lg shadow-lg hover:shadow-xl transform hover:-translate-y-1">
              üöÄ Presk√∫majte kurzy
            </router-link>
            <router-link to="/register" class="bg-transparent border-2 border-white text-white hover:bg-white hover:text-gray-900 font-medium py-4 px-8 rounded-lg transition-all text-lg shadow-lg hover:shadow-xl transform hover:-translate-y-1">
              ‚ú® Zaregistrova≈• sa
            </router-link>
          </div>
        </div>
      </div>
    </section>

    <!-- Featured Courses -->
    <section class="py-16 bg-secondary-50">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-12">
          <h2 class="text-3xl lg:text-4xl font-bold text-gray-900 mb-4">
            Odpor√∫ƒçan√© kurzy
          </h2>
          <p class="text-xl text-gray-600 max-w-2xl mx-auto">
            Starostlivo vybran√© kurzy od na≈°ich najlep≈°√≠ch in≈°truktorov na ur√Ωchlenie va≈°ej YouTube cesty
          </p>
        </div>

        <div v-if="courseStore.loading" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
          <div v-for="i in 6" :key="i" class="card animate-pulse">
            <div class="h-48 bg-gray-200"></div>
            <div class="p-6 space-y-4">
              <div class="h-4 bg-gray-200 rounded w-3/4"></div>
              <div class="h-3 bg-gray-200 rounded w-1/2"></div>
              <div class="h-8 bg-gray-200 rounded w-1/4"></div>
            </div>
          </div>
        </div>

        <div v-else class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
          <CourseCard
            v-for="course in courseStore.featuredCourses"
            :key="course.id"
            :course="course"
            class="animate-fade-in"
          />
        </div>

        <div class="text-center mt-12">
          <router-link to="/courses" class="btn-primary text-lg px-8 py-3">
            Zobrazi≈• v≈°etky kurzy
          </router-link>
        </div>
      </div>
    </section>

    <!-- Features Section -->
    <section class="py-16 bg-white">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-16">
          <h2 class="text-3xl lg:text-4xl font-bold text-gray-900 mb-4">
            Preƒço si vybra≈• VidaduAcademy?
          </h2>
          <p class="text-xl text-gray-600 max-w-2xl mx-auto">
            V≈°etko, co potrebujete na vybudovanie √∫spe≈°n√©ho YouTube kan√°la na jednom mieste
          </p>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
          <div class="text-center animate-fade-in">
            <div class="w-16 h-16 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-6">
              <AcademicCapIcon class="h-8 w-8 text-primary-600" />
            </div>
            <h3 class="text-xl font-semibold mb-4">Experti in≈°truktori</h3>
            <p class="text-gray-600">
              Uƒçte sa od YouTube tvorcov s mili√≥nmi odberateƒæov a overenou hist√≥riou √∫spechov.
            </p>
          </div>

          <div class="text-center animate-fade-in">
            <div class="w-16 h-16 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-6">
              <PlayIcon class="h-8 w-8 text-primary-600" />
            </div>
            <h3 class="text-xl font-semibold mb-4">Praktick√Ω obsah</h3>
            <p class="text-gray-600">
              N√°vody krok za krokom a pr√≠klady z re√°lneho sveta, ktor√© m√¥≈æete okam≈æite implementova≈•.
            </p>
          </div>

          <div class="text-center animate-fade-in">
            <div class="w-16 h-16 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-6">
              <ChartBarIcon class="h-8 w-8 text-primary-600" />
            </div>
            <h3 class="text-xl font-semibold mb-4">Sledovanie pokroku</h3>
            <p class="text-gray-600">
              Monitorujte svoju vzdel√°vaciu cestu s podrobn√Ωm sledovan√≠m pokroku a certifik√°tmi o dokonƒçen√≠.
            </p>
          </div>

          <div class="text-center animate-fade-in">
            <div class="w-16 h-16 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-6">
              <UsersIcon class="h-8 w-8 text-primary-600" />
            </div>
            <h3 class="text-xl font-semibold mb-4">Komunitn√° podpora</h3>
            <p class="text-gray-600">
              Spojte sa s ostatn√Ωmi tvorcami a z√≠skajte podporu od na≈°ej akt√≠vnej komunity ≈°tudentov.
            </p>
          </div>

          <div class="text-center animate-fade-in">
            <div class="w-16 h-16 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-6">
              <DevicePhoneMobileIcon class="h-8 w-8 text-primary-600" />
            </div>
            <h3 class="text-xl font-semibold mb-4">Uƒçte sa kdekoƒævek</h3>
            <p class="text-gray-600">
              Pristupujte k svojim kurzom na akomkoƒævek zariaden√≠, kedykoƒævek. Stiahnite si lekcie na offline sledovanie.
            </p>
          </div>

          <div class="text-center animate-fade-in">
            <div class="w-16 h-16 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-6">
              <StarIcon class="h-8 w-8 text-primary-600" />
            </div>
            <h3 class="text-xl font-semibold mb-4">Garantovan√° kvalita</h3>
            <p class="text-gray-600">
              V≈°etky kurzy s√∫ starostlivo vyberan√© a pravidelne aktualizovan√© pre zaruƒçenie najvy≈°≈°ej kvality.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- Testimonials -->
    <section class="py-16 bg-white">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-16">
          <h2 class="text-3xl lg:text-4xl font-bold text-gray-900 mb-4">
            Pr√≠behy √∫spechov
          </h2>
          <p class="text-xl text-gray-600">
            Poƒçujte od ≈°tudentov, ktor√≠ transformovali svoje YouTube kan√°ly
          </p>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
          <div class="card p-8 text-center animate-fade-in">
            <div class="flex justify-center mb-4">
              <StarIcon v-for="i in 5" :key="i" class="h-5 w-5 text-yellow-400 fill-current" />
            </div>
            <p class="text-gray-600 mb-6">
              "VidaduAcademy mi pomohla nar√°s≈• z 1 tis√≠c na 100 tis√≠c odberateƒæov za pouh√Ωch 6 mesiacov. Strat√©gie skutoƒçne funguj√∫!"
            </p>
            <div class="font-semibold text-gray-900">Sarah M.</div>
            <div class="text-sm text-gray-500">Gaming Creator</div>
          </div>

          <div class="card p-8 text-center animate-fade-in">
            <div class="flex justify-center mb-4">
              <StarIcon v-for="i in 5" :key="i" class="h-5 w-5 text-yellow-400 fill-current" />
            </div>
            <p class="text-gray-600 mb-6">
              "Kurz o monetiz√°cii zmenil v≈°etko. Teraz zar√°bam viac ako 5 tis√≠c dol√°rov mesaƒçne zo svojho kan√°la."
            </p>
            <div class="font-semibold text-gray-900">Michael R.</div>
            <div class="text-sm text-gray-500">Tech Reviewer</div>
          </div>

          <div class="card p-8 text-center animate-fade-in">
            <div class="flex justify-center mb-4">
              <StarIcon v-for="i in 5" :key="i" class="h-5 w-5 text-yellow-400 fill-current" />
            </div>
            <p class="text-gray-600 mb-6">
              "Jasn√©, realizovateƒæn√© rady od skutoƒçn√Ωch expertov. Najlep≈°ia invest√≠cia, ktor√∫ som urobila pre svoju YouTube cestu."
            </p>
            <div class="font-semibold text-gray-900">Emma L.</div>
            <div class="text-sm text-gray-500">Lifestyle Vlogger</div>
          </div>
        </div>
      </div>
    </section>

    <!-- CTA Section -->
    <section class="py-16 bg-gradient-to-r from-primary-600 to-secondary-600 text-white">
      <div class="max-w-4xl mx-auto text-center px-4 sm:px-6 lg:px-8">
        <h2 class="text-3xl lg:text-4xl font-bold mb-6">
          Pripraven√≠ transformova≈• svoj YouTube kan√°l?
        </h2>
        <p class="text-xl mb-8 opacity-90">
          Pridajte sa k tis√≠ckam √∫spe≈°n√Ωch tvorcov, ktor√≠ zaƒçali svoju cestu s VidaduAcademy
        </p>
        <div class="flex flex-col sm:flex-row gap-4 justify-center">
          <router-link to="/register" class="btn-outline border-white text-white hover:bg-white hover:text-primary-600 text-lg px-8 py-4">
            Zaregistrova≈• sa
          </router-link>
          <router-link to="/courses" class="bg-white text-primary-600 hover:bg-gray-100 font-medium py-4 px-8 rounded-lg transition-colors text-lg">
            Prehliadnu≈• kurzy
          </router-link>
        </div>
      </div>
    </section>
  </div>
</template>

<script setup>
import { onMounted, ref, onUnmounted } from 'vue'
import {
  AcademicCapIcon,
  PlayIcon,
  ChartBarIcon,
  UsersIcon,
  DevicePhoneMobileIcon,
  StarIcon,
} from '@heroicons/vue/24/outline'
import { useCourseStore } from '@/stores/course'
import CourseCard from '@/components/courses/CourseCard.vue'

const courseStore = useCourseStore()
const matrixCanvas = ref(null)
let animationId = null

const initMatrix = () => {
  console.log('üé¨ Starting Matrix Rain Animation...')
  const canvas = matrixCanvas.value
  if (!canvas) {
    console.error('‚ùå Canvas not found!')
    return
  }

  const ctx = canvas.getContext('2d')
  
  const resizeCanvas = () => {
    const heroSection = canvas.parentElement
    canvas.width = heroSection.offsetWidth
    canvas.height = heroSection.offsetHeight
    console.log(`üìê Canvas resized to full hero section: ${canvas.width}x${canvas.height}`)
  }
  
  resizeCanvas()
  window.addEventListener('resize', resizeCanvas)
  
  const fontSize = 14
  const columns = canvas.width / fontSize
  const drops = []
  
  // Initialize drops
  for (let x = 0; x < columns; x++) {
    drops[x] = Math.random() * canvas.height
  }
  
  console.log(`üíß Created ${drops.length} drops for ${Math.floor(columns)} columns`)
  
  const animate = () => {
    // Create slower fade effect
    ctx.fillStyle = 'rgba(59, 49, 87, 0.05)'
    ctx.fillRect(0, 0, canvas.width, canvas.height)
    
    // Set text properties
    ctx.font = `${fontSize}px 'Courier New', monospace`
    
    // Draw characters
    for (let i = 0; i < drops.length; i++) {
      const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789<>{}[]()+=/*-_|\\:;.,?!@#$%^&*'
      const text = chars[Math.floor(Math.random() * chars.length)]
      
      // Add opacity variation
      const alpha = Math.random() * 0.4 + 0.6
      const hexAlpha = Math.floor(alpha * 255).toString(16).padStart(2, '0')
      ctx.fillStyle = '#7A65B4' + hexAlpha
      
      // Draw character
      ctx.fillText(text, i * fontSize, drops[i] * fontSize)
      
      // Move drop down (slower speed)
      if (drops[i] * fontSize > canvas.height && Math.random() > 0.985) {
        drops[i] = 0
      }
      drops[i] += 0.2 + Math.random() * 0.3
    }
    
    animationId = requestAnimationFrame(animate)
  }
  
  console.log('üéÆ Starting animation loop...')
  animate()
}

onMounted(() => {
  courseStore.fetchFeaturedCourses()
  
  // Start matrix animation
  setTimeout(() => {
    initMatrix()
  }, 100)
})

onUnmounted(() => {
  if (animationId) {
    cancelAnimationFrame(animationId)
  }
})
</script>
